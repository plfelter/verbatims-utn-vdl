<div id="discussion-container">
    <h1>Discussion</h1>

    <!-- Comment Form with HTMX -->
    <div id="comment-form">
        <h2>Post a Comment</h2>
        {% if error %}
        <div class="error">{{ error }}</div>
        {% endif %}
        {% if success %}
        <div class="success-message">{{ success }}</div>
        {% endif %}
        <form hx-post="/discussion" hx-target="#discussion-container" hx-swap="outerHTML">
            <div>
                <label for="username">Your Name:</label><br>
                <input type="text" id="username" name="username" required>
            </div>
            <div>
                <label for="email">Your Email:</label><br>
                <input type="email" id="email" name="email" required>
            </div>
            <div>
                <label for="body">Comment:</label><br>
                <textarea id="body" name="body" rows="4" required></textarea>
            </div>
            <button type="submit">Post Comment</button>
        </form>
    </div>

    <!-- Comments List -->
    <div id="comments-list">
        <h2>Comments (Sorted by Votes)</h2>
        {% if comments %}
            {% for comment in comments %}
                {% include 'comment_partial.html' %}
            {% endfor %}
        {% else %}
            <p>No comments yet. Be the first to comment!</p>
        {% endif %}
    </div>
</div>
